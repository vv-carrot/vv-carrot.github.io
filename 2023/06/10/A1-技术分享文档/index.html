<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha256-HtsXJanqjKTc8vVQjO4YMhiqFoXkfBsjBWcX91T1jr8=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"vv-carrot.github.io","root":"/","images":"/images","scheme":"Muse","darkmode":false,"version":"8.16.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":true,"style":null},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":true,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}}</script><script src="/js/config.js"></script>

    <meta name="description" content="整理了本科一些小demo的文档。 这部分文档主要展示了自己做出的一些比较拿得出手的效果。剩下还实现了一些数组生成函数比如sin，noise等基础的效果没有特别记录。  一.数组     1.粒子流效果渲染： 运用粒子系统，通过控制线条的疏密以及线条运动的方向，用短而碎的线条运动来体现事物的运动或是水流，烟雾，微风等等“粒子流”的效果。  1）基础粒子流的实现： 实现效果：    实现部分核心代">
<meta property="og:type" content="article">
<meta property="og:title" content="A1-技术文档">
<meta property="og:url" content="https://vv-carrot.github.io/2023/06/10/A1-%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB%E6%96%87%E6%A1%A3/index.html">
<meta property="og:site_name" content="VV&#39;s Blog">
<meta property="og:description" content="整理了本科一些小demo的文档。 这部分文档主要展示了自己做出的一些比较拿得出手的效果。剩下还实现了一些数组生成函数比如sin，noise等基础的效果没有特别记录。  一.数组     1.粒子流效果渲染： 运用粒子系统，通过控制线条的疏密以及线条运动的方向，用短而碎的线条运动来体现事物的运动或是水流，烟雾，微风等等“粒子流”的效果。  1）基础粒子流的实现： 实现效果：    实现部分核心代">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://vv-carrot.github.io/images/a1/particle.gif">
<meta property="og:image" content="https://vv-carrot.github.io/images/a1/particle3.gif">
<meta property="og:image" content="https://vv-carrot.github.io/images/a1/particle4.gif">
<meta property="og:image" content="https://vv-carrot.github.io/images/a1/rect1.gif">
<meta property="og:image" content="https://vv-carrot.github.io/images/a1/rect3.gif">
<meta property="og:image" content="https://vv-carrot.github.io/images/a1/particlepoint.gif">
<meta property="og:image" content="https://vv-carrot.github.io/images/a1/rect5.gif">
<meta property="og:image" content="https://vv-carrot.github.io/images/a1/particle7.gif">
<meta property="og:image" content="https://vv-carrot.github.io/images/a1/rect2.gif">
<meta property="og:image" content="https://vv-carrot.github.io/images/a1/image.png">
<meta property="og:image" content="https://vv-carrot.github.io/images/a1/mount2.gif">
<meta property="og:image" content="https://vv-carrot.github.io/images/a1/mount.gif">
<meta property="og:image" content="https://vv-carrot.github.io/images/a1/image.png">
<meta property="og:image" content="https://vv-carrot.github.io/images/a1/lincircle.gif">
<meta property="og:image" content="https://vv-carrot.github.io/images/a1/linecircle2.gif">
<meta property="og:image" content="https://vv-carrot.github.io/images/a1/mount6.gif">
<meta property="og:image" content="https://vv-carrot.github.io/images/a1/wheel5.gif">
<meta property="og:image" content="https://vv-carrot.github.io/images/a1/tree3.gif">
<meta property="og:image" content="https://vv-carrot.github.io/images/a1/tree1.gif">
<meta property="og:image" content="https://vv-carrot.github.io/images/a1/tree2.gif">
<meta property="og:image" content="https://vv-carrot.github.io/images/a1/tree5.gif">
<meta property="og:image" content="https://vv-carrot.github.io/images/a1/tree6.gif">
<meta property="og:image" content="https://vv-carrot.github.io/images/a1/tree7.gif">
<meta property="og:image" content="https://vv-carrot.github.io/images/a1/tree8.gif">
<meta property="og:image" content="https://vv-carrot.github.io/images/a1/flower.gif">
<meta property="og:image" content="https://vv-carrot.github.io/images/a1/flower1.gif">
<meta property="og:image" content="https://vv-carrot.github.io/images/a1/wheel.gif">
<meta property="og:image" content="https://vv-carrot.github.io/images/a1/wheel1.gif">
<meta property="og:image" content="https://vv-carrot.github.io/images/a1/wheel3.gif">
<meta property="og:image" content="https://vv-carrot.github.io/images/a1/mount1.gif">
<meta property="og:image" content="https://vv-carrot.github.io/images/a1/image1.gif">
<meta property="article:published_time" content="2023-06-10T06:37:17.259Z">
<meta property="article:modified_time" content="2023-07-28T09:02:50.864Z">
<meta property="article:author" content="vv-carrot">
<meta property="article:tag" content="JS">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://vv-carrot.github.io/images/a1/particle.gif">


<link rel="canonical" href="https://vv-carrot.github.io/2023/06/10/A1-%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB%E6%96%87%E6%A1%A3/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://vv-carrot.github.io/2023/06/10/A1-%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB%E6%96%87%E6%A1%A3/","path":"2023/06/10/A1-技术分享文档/","title":"A1-技术文档"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>A1-技术文档 | VV's Blog</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">VV's Blog</p>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li><li class="menu-item menu-item-相册"><a href="/gallery/" rel="section"><i class="fa fa-camera-retro fa-fw"></i>相册</a></li>
  </ul>
</nav>




</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%95%B4%E7%90%86%E4%BA%86%E6%9C%AC%E7%A7%91%E4%B8%80%E4%BA%9B%E5%B0%8Fdemo%E7%9A%84%E6%96%87%E6%A1%A3"><span class="nav-number">1.</span> <span class="nav-text"> 整理了本科一些小demo的文档。</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%B8%80%E6%95%B0%E7%BB%84"><span class="nav-number"></span> <span class="nav-text"> 一.数组</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-number">1.</span> <span class="nav-text"> </span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1%E7%B2%92%E5%AD%90%E6%B5%81%E6%95%88%E6%9E%9C%E6%B8%B2%E6%9F%93"><span class="nav-number">2.</span> <span class="nav-text"> 1.粒子流效果渲染：</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1%E5%9F%BA%E7%A1%80%E7%B2%92%E5%AD%90%E6%B5%81%E7%9A%84%E5%AE%9E%E7%8E%B0"><span class="nav-number">2.1.</span> <span class="nav-text"> 1）基础粒子流的实现：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2%E4%B8%8D%E5%90%8C%E6%B8%B2%E6%9F%93%E6%96%B9%E5%BC%8F%E4%B8%8B%E7%B2%92%E5%AD%90%E6%B5%81%E5%8A%A8%E6%80%81%E6%95%88%E6%9E%9C%E7%9A%84%E5%AE%9E%E7%8E%B0"><span class="nav-number">2.2.</span> <span class="nav-text"> 2）不同渲染方式下粒子流动态效果的实现：</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#-2"><span class="nav-number">3.</span> <span class="nav-text"> </span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2%E7%BE%A4%E5%B1%B1%E6%9B%B2%E7%BA%BF%E6%95%88%E6%9E%9C%E6%B8%B2%E6%9F%93"><span class="nav-number">4.</span> <span class="nav-text"> 2.群山曲线效果渲染：</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1%E5%9F%BA%E7%A1%80%E7%BE%A4%E5%B1%B1%E6%9B%B2%E7%BA%BF%E7%9A%84%E6%95%88%E6%9E%9C%E5%AE%9E%E7%8E%B0"><span class="nav-number">4.1.</span> <span class="nav-text"> 1）基础群山曲线的效果实现：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2%E4%B8%8D%E5%90%8C%E6%B8%B2%E6%9F%93%E6%96%B9%E5%BC%8F%E4%B8%8B%E7%BE%A4%E5%B1%B1%E6%9B%B2%E7%BA%BF%E7%9A%84%E6%95%88%E6%9E%9C%E5%AE%9E%E7%8E%B0"><span class="nav-number">4.2.</span> <span class="nav-text"> 2）不同渲染方式下群山曲线的效果实现：</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#-3"><span class="nav-number">5.</span> <span class="nav-text"> </span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3%E5%88%86%E5%BD%A2%E6%A0%91%E6%95%88%E6%9E%9C%E6%B8%B2%E6%9F%93"><span class="nav-number">6.</span> <span class="nav-text"> 3.分形树效果渲染：</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1%E5%9F%BA%E7%A1%80%E5%88%86%E5%BD%A2%E6%A0%91%E7%9A%84%E6%95%88%E6%9E%9C%E5%AE%9E%E7%8E%B0"><span class="nav-number">6.1.</span> <span class="nav-text"> 1）基础分形树的效果实现：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2%E4%B8%8D%E5%90%8C%E6%B8%B2%E6%9F%93%E6%96%B9%E5%BC%8F%E4%B8%8B%E5%88%86%E5%BD%A2%E6%A0%91%E7%9A%84%E6%95%88%E6%9E%9C%E5%AE%9E%E7%8E%B0"><span class="nav-number">6.2.</span> <span class="nav-text"> 2）不同渲染方式下分形树的效果实现：</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%BA%8C%E5%BD%A2%E7%8A%B6"><span class="nav-number"></span> <span class="nav-text"> 二.形状</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#-4"><span class="nav-number">1.</span> <span class="nav-text"> </span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1%E6%97%8B%E8%BD%AC%E8%8A%B1%E6%9C%B5%E5%BD%A2%E7%8A%B6"><span class="nav-number">2.</span> <span class="nav-text"> 1.旋转花朵形状：</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2%E8%BD%AC%E8%BD%AE%E5%BD%A2%E7%8A%B6"><span class="nav-number">3.</span> <span class="nav-text"> 2.转轮形状：</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#-5"><span class="nav-number">4.</span> <span class="nav-text"> </span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3%E9%92%88%E5%AF%B9%E7%82%B9%E7%9A%84%E8%89%B2%E5%BD%A9%E6%B8%B2%E6%9F%93%E5%BD%A2%E7%8A%B6"><span class="nav-number">5.</span> <span class="nav-text"> 3.针对点的色彩渲染形状：</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4%E8%89%B2%E5%9D%97%E6%99%95%E6%9F%93%E5%BD%A2%E7%8A%B6"><span class="nav-number">6.</span> <span class="nav-text"> 4.色块晕染形状：</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%B8%89%E6%83%B3%E8%AF%B4%E7%9A%84%E8%AF%9D"><span class="nav-number"></span> <span class="nav-text"> 三.想说的话</span></a></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">vv-carrot</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">12</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">6</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">6</span>
        <span class="site-state-item-name">标签</span>
      </div>
  </nav>
</div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://vv-carrot.github.io/2023/06/10/A1-%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB%E6%96%87%E6%A1%A3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="vv-carrot">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="VV's Blog">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="A1-技术文档 | VV's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          A1-技术文档
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2023-06-10 14:37:17" itemprop="dateCreated datePublished" datetime="2023-06-10T14:37:17+08:00">2023-06-10</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2023-07-28 17:02:50" itemprop="dateModified" datetime="2023-07-28T17:02:50+08:00">2023-07-28</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E4%BA%92%E5%8A%A8%E5%AA%92%E4%BD%93%E6%8A%80%E6%9C%AF/" itemprop="url" rel="index"><span itemprop="name">互动媒体技术</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><hr />
<h2 id="整理了本科一些小demo的文档"><a class="markdownIt-Anchor" href="#整理了本科一些小demo的文档"></a> 整理了本科一些小demo的文档。</h2>
<p><em>这部分文档主要展示了自己做出的一些比较拿得出手的效果。剩下还实现了一些数组生成函数比如sin，noise等基础的效果没有特别记录。</em></p>
<h1 id="一数组"><a class="markdownIt-Anchor" href="#一数组"></a> <strong>一.数组</strong></h1>
<hr />
<h2 id=""><a class="markdownIt-Anchor" href="#"></a> </h2>
<h2 id="1粒子流效果渲染"><a class="markdownIt-Anchor" href="#1粒子流效果渲染"></a> 1.粒子流效果渲染：</h2>
<p>运用粒子系统，通过控制线条的疏密以及线条运动的方向，用短而碎的线条运动来体现事物的运动或是水流，烟雾，微风等等“粒子流”的效果。</p>
<h3 id="1基础粒子流的实现"><a class="markdownIt-Anchor" href="#1基础粒子流的实现"></a> 1）基础粒子流的实现：</h3>
<p><strong>实现效果：</strong><br />
<img src="/images/a1/particle.gif" alt="" /><br />
<img src="/images/a1/particle3.gif" alt="" /><br />
<img src="/images/a1/particle4.gif" alt="" /></p>
<p><strong>实现部分核心代码：</strong></p>
<p>此效果核心在于创建一个particle粒子类：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="title class_">Particle</span> = <span class="keyword">function</span>(<span class="params">loc_, dir_, speed_,nscale_,nstrength_</span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">loc</span> = loc_;</span><br><span class="line">	<span class="variable language_">this</span>.<span class="property">dir</span> = dir_;</span><br><span class="line">	<span class="variable language_">this</span>.<span class="property">speed</span> = speed_;</span><br><span class="line">	<span class="variable language_">this</span>.<span class="property">noiseScale</span> = nscale_;</span><br><span class="line">	<span class="variable language_">this</span>.<span class="property">noiseStrength</span> = nstrength_;</span><br><span class="line">	<span class="variable language_">this</span>.<span class="property">d</span> = <span class="number">1</span>;</span><br><span class="line">	<span class="variable language_">this</span>.<span class="property">col</span>;</span><br><span class="line">	<span class="variable language_">this</span>.<span class="property">angle</span>;</span><br><span class="line">	<span class="variable language_">this</span>.<span class="property">vel</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>并对particle类的一些基础函数进行定义：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Particle</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">run</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">	<span class="variable language_">this</span>.<span class="title function_">move</span>();</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">checkEdges</span>();</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">update</span>();</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 粒子位置移动</span></span><br><span class="line"><span class="title class_">Particle</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">move</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">	  <span class="variable language_">this</span>.<span class="property">angle</span>=<span class="title function_">noise</span>(<span class="variable language_">this</span>.<span class="property">loc</span>.<span class="property">x</span>/<span class="variable language_">this</span>.<span class="property">noiseScale</span>, <span class="variable language_">this</span>.<span class="property">loc</span>.<span class="property">y</span>/<span class="variable language_">this</span>.<span class="property">noiseScale</span>, frameCount/<span class="variable language_">this</span>.<span class="property">noiseScale</span>)*<span class="variable constant_">TWO_PI</span>*<span class="variable language_">this</span>.<span class="property">noiseStrength</span>;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">dir</span>.<span class="property">x</span> = <span class="title function_">cos</span>(<span class="variable language_">this</span>.<span class="property">angle</span>)+<span class="title function_">sin</span>(<span class="variable language_">this</span>.<span class="property">angle</span>)-<span class="title function_">sin</span>(<span class="variable language_">this</span>.<span class="property">angle</span>);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">dir</span>.<span class="property">y</span> = <span class="title function_">sin</span>(<span class="variable language_">this</span>.<span class="property">angle</span>)-<span class="title function_">cos</span>(<span class="variable language_">this</span>.<span class="property">angle</span>)*<span class="title function_">sin</span>(<span class="variable language_">this</span>.<span class="property">angle</span>);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">vel</span> = <span class="variable language_">this</span>.<span class="property">dir</span>.<span class="title function_">copy</span>();</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">vel</span>.<span class="title function_">mult</span>(<span class="variable language_">this</span>.<span class="property">speed</span>*<span class="variable language_">this</span>.<span class="property">d</span>);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">loc</span>.<span class="title function_">add</span>(<span class="variable language_">this</span>.<span class="property">vel</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 防止移出边缘</span></span><br><span class="line"><span class="title class_">Particle</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">checkEdges</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line"> <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">loc</span>.<span class="property">x</span> &lt; <span class="number">0</span> || <span class="variable language_">this</span>.<span class="property">loc</span>.<span class="property">x</span> &gt; width || <span class="variable language_">this</span>.<span class="property">loc</span>.<span class="property">y</span> &lt; <span class="number">0</span> || <span class="variable language_">this</span>.<span class="property">loc</span>.<span class="property">y</span> &gt; height) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">loc</span>.<span class="property">x</span> = <span class="title function_">random</span>(width*<span class="number">9.2</span>);</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">loc</span>.<span class="property">y</span> = <span class="title function_">random</span>(height);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>现在我们对粒子流的轨迹生成进行实现，用的最多的还是随机，毕竟随机性总是能给我创造出一些惊喜和意料之外的效果，生成粒子轨迹函数的代码如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//生成粒子轨迹函数</span></span><br><span class="line"><span class="keyword">var</span> particles = [];</span><br><span class="line"><span class="keyword">let</span> noiseScale = nscale;</span><br><span class="line"><span class="keyword">let</span> noiseStrength = nstrength;</span><br><span class="line"><span class="title function_">noStroke</span>();</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i=<span class="number">0</span>; i&lt;num; i++) &#123;</span><br><span class="line">    <span class="keyword">let</span> loc = <span class="title function_">createVector</span>(<span class="title function_">random</span>(width*<span class="number">2.8</span>), <span class="title function_">random</span>(height), <span class="number">5</span>);</span><br><span class="line">    <span class="keyword">let</span> angle = <span class="title function_">random</span>(<span class="variable constant_">TWO_PI</span>);</span><br><span class="line">    <span class="keyword">let</span> dir = <span class="title function_">createVector</span>(<span class="title function_">cos</span>(angle), <span class="title function_">sin</span>(angle));</span><br><span class="line"><span class="keyword">let</span> speed = <span class="title function_">random</span>(<span class="number">1.5</span>, <span class="number">0.8</span>);</span><br><span class="line">particles[i] = <span class="keyword">new</span> <span class="title class_">Particle</span>(loc, dir, speed,nscale,nstrength);</span><br></pre></td></tr></table></figure>
<p><strong>对于渲染部分，我们通过在update函数这一部分代码中添加不同的渲染函数实现：</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 粒子位置更新</span></span><br><span class="line"><span class="title class_">Particle</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">update</span> = <span class="keyword">function</span>(<span class="params">r</span>)&#123;</span><br><span class="line">  <span class="title function_">ellipse</span>(<span class="variable language_">this</span>.<span class="property">loc</span>.<span class="property">x</span>, <span class="variable language_">this</span>.<span class="property">loc</span>.<span class="property">y</span>, r);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="2不同渲染方式下粒子流动态效果的实现"><a class="markdownIt-Anchor" href="#2不同渲染方式下粒子流动态效果的实现"></a> 2）不同渲染方式下粒子流动态效果的实现：</h3>
<p>可以参考这种效果对线条进行粗细和颜色的渲染，当然，我感觉这个的实现重点在粒子流数组生成上。在生成粒子流的基础上可以对其施加不同的渲染效果，我们把不同的渲染添加到particle的update（）函数里面：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 粒子位置更新</span></span><br><span class="line"><span class="title class_">Particle</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">update</span> = <span class="keyword">function</span>(<span class="params">r</span>)&#123;</span><br><span class="line">	<span class="comment">//1.圆形渲染</span></span><br><span class="line">	<span class="comment">//stroke([255,255,255]);</span></span><br><span class="line">  <span class="comment">//ellipse(this.loc.x, this.loc.y, r);</span></span><br><span class="line">	<span class="comment">//2.用点的色彩渲染来渲染粒子流</span></span><br><span class="line">	<span class="keyword">var</span> point=[];</span><br><span class="line">	point[<span class="number">0</span>]=<span class="variable language_">this</span>.<span class="property">loc</span>.<span class="property">x</span>;</span><br><span class="line">	point[<span class="number">1</span>]=<span class="variable language_">this</span>.<span class="property">loc</span>.<span class="property">y</span>;</span><br><span class="line">	<span class="comment">//renderTrace_colorPoints(point,3, 12, 0.1, 0.9,240,100,150,3);</span></span><br><span class="line">	<span class="comment">//2.用点的色彩渲染来渲染粒子流</span></span><br><span class="line">	<span class="comment">//以下是我自己的多种尝试,每一行都是一种效果，可以配合上面的渲染效果一起：</span></span><br><span class="line">	<span class="comment">//rect(this.loc.x, this.loc.y,this.loc.x+random(-this.loc.x,3),                      this.loc.y+random(-this.loc.y,3));</span></span><br><span class="line">	<span class="comment">//rect(this.loc.x, this.loc.y,this.loc.x+random(0,10), this.loc.y+random(0,10));</span></span><br><span class="line">	<span class="title function_">stroke</span>([<span class="number">255</span>,<span class="number">255</span>,<span class="number">255</span>]);</span><br><span class="line">	<span class="title function_">rect</span>(<span class="variable language_">this</span>.<span class="property">loc</span>.<span class="property">x</span>, <span class="variable language_">this</span>.<span class="property">loc</span>.<span class="property">y</span>,<span class="title function_">random</span>(-<span class="number">3</span>,<span class="number">3</span>),<span class="variable language_">this</span>.<span class="property">loc</span>.<span class="property">y</span>+<span class="title function_">random</span>(-<span class="number">3</span>,<span class="number">3</span>));</span><br><span class="line">	<span class="comment">//rect(this.loc.x, this.loc.y,random(0,10), random(0,10));</span></span><br><span class="line">	<span class="title function_">renderSpriteOnTrace_wheel</span>(<span class="variable language_">this</span>.<span class="property">loc</span>.<span class="property">x</span>,<span class="variable language_">this</span>.<span class="property">loc</span>.<span class="property">y</span>,</span><br><span class="line">    <span class="title function_">random</span>(<span class="number">10</span>,<span class="number">40</span>),frameCount,rotateCount,mouseX)</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>上面的update函数专门用来添加不同效果的渲染！<br />
以下动态效果是我通过不同渲染效果随机搭配得到的↓，给大家展示几种，通过调参数能得到很出乎意料的动图，多尝试总会有惊喜：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//在update里添加代码：（一种渲染）</span></span><br><span class="line"><span class="title function_">rect</span>(<span class="variable language_">this</span>.<span class="property">loc</span>.<span class="property">x</span>, <span class="variable language_">this</span>.<span class="property">loc</span>.<span class="property">y</span>,<span class="variable language_">this</span>.<span class="property">loc</span>.<span class="property">x</span>+<span class="title function_">random</span>(<span class="variable language_">this</span>.<span class="property">loc</span>.<span class="property">x</span>,<span class="number">3</span>), <span class="variable language_">this</span>.<span class="property">loc</span>.<span class="property">y</span>+<span class="title function_">random</span>(-<span class="variable language_">this</span>.<span class="property">loc</span>.<span class="property">y</span>,<span class="number">3</span>));</span><br><span class="line"><span class="comment">//效果如下：</span></span><br></pre></td></tr></table></figure>
<p><img src="/images/a1/rect1.gif" alt="" /></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//在update里添加代码：（两种一起渲染）</span></span><br><span class="line">    <span class="keyword">var</span> point=[];</span><br><span class="line">	point[<span class="number">0</span>]=<span class="variable language_">this</span>.<span class="property">loc</span>.<span class="property">x</span>;</span><br><span class="line">	point[<span class="number">1</span>]=<span class="variable language_">this</span>.<span class="property">loc</span>.<span class="property">y</span>;</span><br><span class="line">	<span class="title function_">renderTrace_colorPoints</span>(point,<span class="number">3</span>, <span class="number">12</span>, <span class="number">0.1</span>, <span class="number">0.9</span>,<span class="number">240</span>,<span class="number">100</span>,<span class="number">150</span>,<span class="number">3</span>);</span><br><span class="line">	<span class="title function_">rect</span>(<span class="variable language_">this</span>.<span class="property">loc</span>.<span class="property">x</span>, <span class="variable language_">this</span>.<span class="property">loc</span>.<span class="property">y</span>,<span class="variable language_">this</span>.<span class="property">loc</span>.<span class="property">x</span>+<span class="title function_">random</span>(-<span class="variable language_">this</span>.<span class="property">loc</span>.<span class="property">x</span>,<span class="number">3</span>), <span class="variable language_">this</span>.<span class="property">loc</span>.<span class="property">y</span>+<span class="title function_">random</span>(-<span class="variable language_">this</span>.<span class="property">loc</span>.<span class="property">y</span>,<span class="number">3</span>));</span><br><span class="line"><span class="comment">//效果如下：</span></span><br></pre></td></tr></table></figure>
<p><img src="/images/a1/rect3.gif" alt="" /></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//在update里添加代码：（一种渲染，将circle转换成多彩粒子）</span></span><br><span class="line">	<span class="keyword">var</span> point=[];</span><br><span class="line">	point[<span class="number">0</span>]=<span class="variable language_">this</span>.<span class="property">loc</span>.<span class="property">x</span>;</span><br><span class="line">	point[<span class="number">1</span>]=<span class="variable language_">this</span>.<span class="property">loc</span>.<span class="property">y</span>;</span><br><span class="line">	<span class="title function_">renderTrace_colorPoints</span>(point,<span class="number">3</span>, <span class="number">12</span>, <span class="number">0.1</span>, <span class="number">0.9</span>,<span class="number">240</span>,<span class="number">100</span>,<span class="number">150</span>,<span class="number">3</span>);</span><br><span class="line"><span class="comment">//效果如下：</span></span><br></pre></td></tr></table></figure>
<p><img src="/images/a1/particlepoint.gif" alt="" /></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//在update里添加代码：</span></span><br><span class="line">   <span class="keyword">var</span> point=[];</span><br><span class="line">point[<span class="number">0</span>]=<span class="variable language_">this</span>.<span class="property">loc</span>.<span class="property">x</span>;</span><br><span class="line">point[<span class="number">1</span>]=<span class="variable language_">this</span>.<span class="property">loc</span>.<span class="property">y</span>;</span><br><span class="line"><span class="title function_">renderTrace_colorPoints</span>(point,<span class="number">3</span>, <span class="number">12</span>, <span class="number">0.1</span>, <span class="number">0.9</span>,<span class="number">240</span>,<span class="number">100</span>,<span class="number">150</span>,<span class="number">3</span>);</span><br><span class="line"><span class="title function_">rect</span>(<span class="variable language_">this</span>.<span class="property">loc</span>.<span class="property">x</span>, <span class="variable language_">this</span>.<span class="property">loc</span>.<span class="property">y</span>,<span class="title function_">random</span>(-<span class="number">3</span>,<span class="number">3</span>),<span class="variable language_">this</span>.<span class="property">loc</span>.<span class="property">y</span>+<span class="title function_">random</span>(-<span class="number">3</span>,<span class="number">3</span>));</span><br><span class="line">   <span class="comment">//效果如下</span></span><br></pre></td></tr></table></figure>
<p><img src="/images/a1/rect5.gif" alt="" /></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//在update里添加代码：</span></span><br><span class="line"><span class="title function_">stroke</span>([<span class="number">255</span>,<span class="number">255</span>,<span class="number">255</span>]);</span><br><span class="line"><span class="title function_">rect</span>(<span class="variable language_">this</span>.<span class="property">loc</span>.<span class="property">x</span>,   <span class="variable language_">this</span>.<span class="property">loc</span>.<span class="property">y</span>,<span class="title function_">random</span>(-<span class="number">3</span>,<span class="number">3</span>),<span class="variable language_">this</span>.<span class="property">loc</span>.<span class="property">y</span>+<span class="title function_">random</span>(-<span class="number">3</span>,<span class="number">3</span>));</span><br><span class="line"><span class="title function_">renderSpriteOnTrace_wheel</span>(<span class="variable language_">this</span>.<span class="property">loc</span>.<span class="property">x</span>,<span class="variable language_">this</span>.<span class="property">loc</span>.<span class="property">y</span>,<span class="title function_">random</span>(<span class="number">10</span>,<span class="number">40</span>),frameCount,rotateCount,mouseX);</span><br><span class="line"><span class="comment">//效果如下：（很喜欢这种效果！像飞舞的蒲公英！果然黑白才是我能驾驭得住的颜色呜呜！）</span></span><br></pre></td></tr></table></figure>
<p><img src="/images/a1/particle7.gif" alt="" /></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//在update里添加代码：</span></span><br><span class="line"><span class="title function_">rect</span>(<span class="variable language_">this</span>.<span class="property">loc</span>.<span class="property">x</span>, <span class="variable language_">this</span>.<span class="property">loc</span>.<span class="property">y</span>,<span class="title function_">random</span>(<span class="number">0</span>,<span class="number">10</span>), <span class="title function_">random</span>(<span class="number">0</span>,<span class="number">10</span>));</span><br><span class="line"><span class="comment">//效果如下：</span></span><br></pre></td></tr></table></figure>
<p><img src="/images/a1/rect2.gif" alt="" /></p>
<hr />
<h2 id="-2"><a class="markdownIt-Anchor" href="#-2"></a> </h2>
<h2 id="2群山曲线效果渲染"><a class="markdownIt-Anchor" href="#2群山曲线效果渲染"></a> 2.群山曲线效果渲染：</h2>
<h3 id="1基础群山曲线的效果实现"><a class="markdownIt-Anchor" href="#1基础群山曲线的效果实现"></a> 1）基础群山曲线的效果实现：</h3>
<p>比较常见的群山曲线（其实也可以叫做心电凸曲线），配合线条的运动效果更佳。</p>
<p><strong>实现效果：</strong><br />
<img src="/images/a1/image.png" alt="" /><br />
此效果核心在于创建一个Layer类：</p>
<p><strong>实现部分核心代码：</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//生成群山轨迹函数(带有多层)</span></span><br><span class="line"><span class="keyword">var</span> layers = [];</span><br><span class="line"><span class="keyword">var</span> step = (height-<span class="number">120</span>)/num;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i=<span class="number">0</span>; i&lt;num; i++) &#123;</span><br><span class="line">	layers[i] = <span class="keyword">new</span> <span class="title class_">Layer</span>(-<span class="number">40</span>+i*step, <span class="title function_">random</span>(<span class="number">2000</span>), i+<span class="number">1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>对于这个类，只有两个比较简单的函数：layer的构造函数和渲染相关的display函数。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//效果-群山中的layer类相关定义</span></span><br><span class="line"><span class="keyword">let</span> <span class="title class_">Layer</span> = <span class="keyword">function</span>(<span class="params">_start, _noize, _speed</span>) &#123;</span><br><span class="line">	<span class="variable language_">this</span>.<span class="property">start</span> = _start;</span><br><span class="line">	<span class="variable language_">this</span>.<span class="property">noize</span> = _noize;</span><br><span class="line">	<span class="variable language_">this</span>.<span class="property">speed</span> = _speed;</span><br><span class="line">	<span class="variable language_">this</span>.<span class="property">yOff</span>=<span class="number">0</span>;</span><br><span class="line">	<span class="variable language_">this</span>.<span class="property">yOff2</span>=<span class="number">0</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>之后要使用不同的渲染方式，也可以在display渲染里面进行添加：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Layer.prototype.display = function(t)&#123;</span><br><span class="line">	this.yOff = this.yOff2;</span><br><span class="line">	var step = (height-120)/num;</span><br><span class="line">	noStroke();</span><br><span class="line">	for (var x=0; x&lt;width; x+=1) &#123;</span><br><span class="line">		var y = this.start +noise(this.noize+sin(this.yOff)*5)*step*3;</span><br><span class="line">		//----------------------群山曲线渲染方式----------------------</span><br><span class="line">		//基础渲染方式：使用rect逐条填充</span><br><span class="line">		rect(x, height, 1, -height+y);</span><br><span class="line">		this.yOff+=TWO_PI/(width);</span><br><span class="line">	&#125;</span><br><span class="line">	this.yOff2=t*this.speed;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="2不同渲染方式下群山曲线的效果实现"><a class="markdownIt-Anchor" href="#2不同渲染方式下群山曲线的效果实现"></a> 2）不同渲染方式下群山曲线的效果实现：</h3>
<p><strong>使用rect逐条填充群山曲线渲染效果</strong>：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.使用rect逐条填充</span></span><br><span class="line"><span class="title function_">rect</span>(x, height, <span class="number">1</span>, -height+y);</span><br></pre></td></tr></table></figure>
<p><img src="/images/a1/mount2.gif" alt="" /><br />
<strong>使用****针对点的色彩渲染来渲染群山曲线</strong>：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//2.用点的色彩渲染来渲染群山曲线</span></span><br><span class="line"><span class="title function_">renderTrace_colorPoints</span>(point,<span class="number">10</span>, <span class="number">25</span>, <span class="number">0.1</span>,   <span class="number">0.6</span>,<span class="number">240</span>,<span class="number">150</span>,<span class="number">100</span>,<span class="number">3</span>);</span><br></pre></td></tr></table></figure>
<p><img src="/images/a1/mount.gif" alt="" /></p>
<p><strong>普通圆形显示群山曲线</strong>：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//3.普通圆形渲染</span></span><br><span class="line"><span class="title function_">ellipse</span>(x,y,<span class="number">5</span>,<span class="number">5</span>);</span><br></pre></td></tr></table></figure>
<p><img src="/images/a1/image.png" alt="" /></p>
<p><strong>混合渲染效果</strong>：我把rect逐条填充群山曲线渲染，针对点的色彩渲染 ，以及旋转花朵效果结合在一起，误打误撞得到了还不错的效果（缺点是可控性比较弱）：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//----------------------群山曲线混合渲染方式-------------</span></span><br><span class="line"><span class="comment">//1.使用rect逐条填充</span></span><br><span class="line"><span class="title function_">rect</span>(x, height, <span class="number">1</span>, -height+y);</span><br><span class="line"><span class="comment">//2.用点的色彩渲染来渲染群山曲线</span></span><br><span class="line"><span class="title function_">renderTrace_colorPoints</span>(point,<span class="number">10</span>, <span class="number">25</span>, <span class="number">0.1</span>, <span class="number">0.6</span>,<span class="number">240</span>,<span class="number">150</span>,<span class="number">100</span>,<span class="number">3</span>);</span><br><span class="line"><span class="comment">//3.普通圆形渲染</span></span><br><span class="line"><span class="title function_">ellipse</span>(x,y,<span class="number">5</span>,<span class="number">5</span>);</span><br><span class="line">   <span class="comment">//4.盛开花朵渲染</span></span><br><span class="line">   <span class="comment">// 相关参数初始化</span></span><br><span class="line">flowerScaleT = <span class="title function_">random</span>(<span class="number">0.8</span>, <span class="number">2</span>);</span><br><span class="line">flowerDelay.<span class="property">val</span> = <span class="title function_">round</span>(<span class="title function_">random</span>(<span class="number">200</span>, <span class="number">250</span>));</span><br><span class="line">flowerBright = <span class="number">255</span>;</span><br><span class="line">flowerColor = <span class="title function_">color</span>(<span class="title function_">random</span>(<span class="number">0</span>,<span class="number">200</span>), <span class="title function_">random</span>(<span class="number">0</span>, <span class="number">255</span>),</span><br><span class="line">   <span class="title function_">random</span>(<span class="number">0</span>, <span class="number">255</span>));</span><br><span class="line">flowerScale.<span class="property">val</span> = <span class="number">0.0</span>;</span><br><span class="line">flowerScaleT = <span class="number">1.0</span>;</span><br><span class="line">flowerWidth=<span class="number">40</span>;</span><br><span class="line">flowerHeight=<span class="number">80</span>;</span><br><span class="line"><span class="title function_">renderSpriteOnTrace_flower</span>(x,y,flowerDelay,flowerBright,</span><br><span class="line">      flowerColor,<span class="number">8</span>,<span class="number">20</span>,flowerScale,flowerScaleT);</span><br><span class="line">      </span><br></pre></td></tr></table></figure>
<p>效果如下，可能是因为旋转花朵比较特殊，合起来以后没有出现花朵，但是得到了我意料之外的结果：<br />
<img src="/images/a1/lincircle.gif" alt="" /><br />
<img src="/images/a1/linecircle2.gif" alt="" /></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> x=<span class="number">0</span>; x&lt;width; x+=<span class="number">40</span>) &#123;</span><br><span class="line">	<span class="keyword">var</span> y = <span class="variable language_">this</span>.<span class="property">start</span> + <span class="title function_">noise</span>(<span class="variable language_">this</span>.<span class="property">noize</span>+<span class="title function_">sin</span>(<span class="variable language_">this</span>.<span class="property">yOff</span>)*<span class="number">5</span>)*step*<span class="number">3</span>;</span><br><span class="line">	<span class="comment">//----------------------群山曲线渲染方式----------------------</span></span><br><span class="line">	<span class="comment">//1.使用rect逐条填充</span></span><br><span class="line">	<span class="title function_">rect</span>(x, height, <span class="number">1</span>, -height+y);</span><br><span class="line">	<span class="comment">//2.用点的色彩渲染来渲染群山曲线</span></span><br><span class="line">	 <span class="keyword">var</span> point=[];</span><br><span class="line">	 point[<span class="number">0</span>]=x;</span><br><span class="line">	 point[<span class="number">1</span>]=y;</span><br><span class="line">	 <span class="title function_">renderTrace_colorPoints</span>(point,<span class="number">10</span>, <span class="number">25</span>, <span class="number">0.1</span>, <span class="number">0.6</span>,<span class="number">100</span>,<span class="number">150</span>,<span class="number">240</span>,<span class="number">3</span>);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//5.转轮渲染</span></span><br><span class="line">	 <span class="keyword">if</span>(x%<span class="number">50</span>==<span class="number">0</span>)&#123;	 	<span class="title function_">renderSpriteOnTrace_wheel</span>(x,y,<span class="number">10</span>,frameCount,rotateCount,mouseX);</span><br><span class="line">	 &#125;</span><br><span class="line">	<span class="variable language_">this</span>.<span class="property">yOff</span>+=<span class="variable constant_">TWO_PI</span>/(width);</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">yOff2</span>=t*<span class="variable language_">this</span>.<span class="property">speed</span>;</span><br></pre></td></tr></table></figure>
<p>调用以上代码进行渲染，可以得到的效果如下：<br />
<img src="/images/a1/mount6.gif" alt="" /></p>
<p><strong>转轮+rect混合渲染效果：</strong></p>
<p>添加元素后渲染得到的效果：在用rect渲染的基础上再添加一些元素，最好是设置一个间隔（不然转轮会过于密集而且会很卡）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//1.使用rect逐条填充</span><br><span class="line">rect(x, height, 1, -height+y);</span><br><span class="line">   //5.转轮渲染</span><br><span class="line">if(x%60==0)&#123;</span><br><span class="line">renderSpriteOnTrace_wheel(x,y,10,frameCount,rotateCount,mouseX);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>得到的效果如下，（好像它们都在爬山一样，鼠标一动每一个转轮的转速还会加快）。</p>
<h2 id="-3"><a class="markdownIt-Anchor" href="#-3"></a> <img src="/images/a1/wheel5.gif" alt="" /></h2>
<h2 id="3分形树效果渲染"><a class="markdownIt-Anchor" href="#3分形树效果渲染"></a> 3.分形树效果渲染：</h2>
<h3 id="1基础分形树的效果实现"><a class="markdownIt-Anchor" href="#1基础分形树的效果实现"></a> 1）基础分形树的效果实现：</h3>
<p><img src="/images/a1/tree3.gif" alt="" /><br />
类似这种风格的，海报上利用黑白线条构成字体上逆向生长的树，对这种风格进行模仿，线条有疏有密黑白对比强烈，密集黑色线条能够渲染气氛：</p>
<p><strong>实现部分核心代码：</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">// 渲染风格——黑色递归树</span></span><br><span class="line">  <span class="comment">//x,y:递归树在画布中的位置</span></span><br><span class="line"> <span class="comment">//r:递归树的旋转方向</span></span><br><span class="line"> <span class="comment">//type:画圆或是画线的类型</span></span><br><span class="line">  <span class="comment">//c:递归深度，决定树枝粗细</span></span><br><span class="line"> <span class="comment">//l：初始树枝长度</span></span><br><span class="line"><span class="keyword">if</span>(c)</span><br><span class="line">&#123;</span><br><span class="line">	d=<span class="number">19</span>-c/<span class="number">2</span>;</span><br><span class="line">	<span class="title function_">strokeWeight</span>(c--);</span><br><span class="line">	<span class="title function_">stroke</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,c*<span class="number">25</span>);  <span class="comment">//控制线条透明度，备注掉全黑</span></span><br><span class="line">	n=<span class="title function_">noise</span>(x/w-t,y/w+t)*d;</span><br><span class="line">	<span class="keyword">if</span>(type==<span class="number">0</span>)&#123;</span><br><span class="line">         <span class="comment">//画圆</span></span><br><span class="line">         <span class="title function_">ellipse</span>(x+=l*<span class="title function_">cos</span>(r)+d*<span class="title function_">cos</span>(n),y+=l*<span class="title function_">sin</span>(r)+d*<span class="title function_">sin</span>(n),r*<span class="number">4</span>,r*<span class="number">4</span>); </span><br><span class="line">	  <span class="comment">//type=1;  //取消备注会在圆和线之间切换。</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span> <span class="keyword">if</span>(type==<span class="number">1</span>	)&#123;</span><br><span class="line">         <span class="comment">//画线</span></span><br><span class="line">	  <span class="title function_">line</span>(x,y,x+=l*<span class="title function_">cos</span>(r)+d*<span class="title function_">cos</span>(n),y+=l*<span class="title function_">sin</span>(r)+d*<span class="title function_">sin</span>(n)) </span><br><span class="line">	  <span class="comment">//type=0; //取消备注会在圆和线之间切换。</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//rotate(PI / 60.0); //取消备注不再是一棵树</span></span><br><span class="line">	<span class="keyword">for</span>(i <span class="keyword">of</span>[<span class="number">.4</span>,-<span class="number">.4</span>])</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="title function_">renderTrace_trees</span>(x,y,r+i,type,c,l*<span class="number">.83</span>)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line">	<span class="keyword">var</span> point=[];</span><br><span class="line">	point[<span class="number">0</span>]=x;</span><br><span class="line">	point[<span class="number">1</span>]=y;</span><br><span class="line">        <span class="comment">//添上树叶</span></span><br><span class="line">	<span class="comment">//renderTrace_colorPoints(point,10, 25, 0.1, 0.6,200,240,200,30);</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="2不同渲染方式下分形树的效果实现"><a class="markdownIt-Anchor" href="#2不同渲染方式下分形树的效果实现"></a> 2）不同渲染方式下分形树的效果实现：</h3>
<p>我们对分形树基础算法进行一些渲染改造，比如说给它添加上树叶：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//添上树叶</span></span><br><span class="line">renderTrace_colorPoints</span><br><span class="line">(point,<span class="number">10</span>,<span class="number">25</span>,<span class="number">0.1</span>,<span class="number">0.6</span>,<span class="number">200</span>,<span class="number">240</span>,<span class="number">200</span>,<span class="number">30</span>);</span><br></pre></td></tr></table></figure>
<p>然后再把代码中的一部分备注取消掉：<br />
<img src="data:image/png;base64,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" alt="图片" /></p>
<p><img src="data:image/png;base64,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" alt="图片" /></p>
<p>以上操作可以得到下面的结果：<br />
<img src="/images/a1/tree1.gif" alt="" /><br />
<img src="/images/a1/tree2.gif" alt="" /></p>
<p>在代码中取消掉这一行的备注！</p>
<p><img src="data:image/png;base64,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" alt="图片" /></p>
<p>我们就会得到下面的结果：<br />
<img src="/images/a1/tree5.gif" alt="" /></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//直接调用函数，得到下面的结果！</span></span><br><span class="line"><span class="title function_">renderTrace_trees</span>(h=w/<span class="number">2</span>,w,-<span class="variable constant_">PI</span>/<span class="number">2</span>,<span class="number">0</span>);</span><br></pre></td></tr></table></figure>
<p><img src="/images/a1/tree6.gif" alt="" /><br />
两种效果融合！↓↓↓</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//直接调用两个函数，一个是画线，一个是画圆，得到下面的结果！</span></span><br><span class="line">  <span class="title function_">renderTrace_trees</span>(h=w/<span class="number">2</span>,w,-<span class="variable constant_">PI</span>/<span class="number">2</span>,<span class="number">1</span>);</span><br><span class="line">  <span class="title function_">renderTrace_trees</span>(h=w/<span class="number">2</span>,w,-<span class="variable constant_">PI</span>/<span class="number">2</span>,<span class="number">0</span>);</span><br></pre></td></tr></table></figure>
<p><img src="/images/a1/tree7.gif" alt="" /><br />
整个大的！同时调用生成多个分形树并把它们旋转到不同的角度，效果如下所示：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">renderTrace_trees</span>(h=w/<span class="number">2</span>,w/<span class="number">2</span>,<span class="variable constant_">PI</span>*<span class="number">2</span>/<span class="number">3</span>,<span class="number">1</span>)+<span class="title function_">renderTrace_trees</span>(h=w/<span class="number">2</span>,w/<span class="number">2</span>,<span class="variable constant_">PI</span>*<span class="number">2</span>/<span class="number">3</span>,<span class="number">0</span>);  <span class="title function_">renderTrace_trees</span>(h=w/<span class="number">2</span>,w/<span class="number">2</span>,<span class="variable constant_">PI</span>/<span class="number">3</span>,<span class="number">1</span>)+<span class="title function_">renderTrace_trees</span>(h=w/<span class="number">2</span>,w/<span class="number">2</span>,<span class="variable constant_">PI</span>/<span class="number">3</span>,<span class="number">0</span>);</span><br><span class="line"><span class="title function_">renderTrace_trees</span>(h=w/<span class="number">2</span>,w/<span class="number">2</span>,-<span class="variable constant_">PI</span>*<span class="number">2</span>/<span class="number">3</span>,<span class="number">1</span>)+<span class="title function_">renderTrace_trees</span>(h=w/<span class="number">2</span>,w/<span class="number">2</span>,-<span class="variable constant_">PI</span>*<span class="number">2</span>/<span class="number">3</span>,<span class="number">0</span>);</span><br><span class="line"><span class="title function_">renderTrace_trees</span>(h=w/<span class="number">2</span>,w/<span class="number">2</span>,-<span class="variable constant_">PI</span>/<span class="number">3</span>,<span class="number">1</span>)+<span class="title function_">renderTrace_trees</span>(h=w/<span class="number">2</span>,w/<span class="number">2</span>,-<span class="variable constant_">PI</span>/<span class="number">3</span>,<span class="number">0</span>);</span><br><span class="line"><span class="title function_">renderTrace_trees</span>(h=w/<span class="number">2</span>,w/<span class="number">2</span>,<span class="variable constant_">PI</span>,<span class="number">1</span>)+<span class="title function_">renderTrace_trees</span>(h=w/<span class="number">2</span>,w/<span class="number">2</span>,<span class="variable constant_">PI</span>,<span class="number">0</span>);</span><br><span class="line"><span class="title function_">renderTrace_trees</span>(h=w/<span class="number">2</span>,w/<span class="number">2</span>,<span class="number">0</span>,<span class="number">1</span>)+<span class="title function_">renderTrace_trees</span>(h=w/<span class="number">2</span>,w/<span class="number">2</span>,<span class="number">0</span>,<span class="number">0</span>);</span><br></pre></td></tr></table></figure>
<p><img src="/images/a1/tree8.gif" alt="" /></p>
<h1 id="二形状"><a class="markdownIt-Anchor" href="#二形状"></a> <strong>二.形状</strong></h1>
<hr />
<h2 id="-4"><a class="markdownIt-Anchor" href="#-4"></a> </h2>
<h2 id="1旋转花朵形状"><a class="markdownIt-Anchor" href="#1旋转花朵形状"></a> <strong>1.旋转花朵形状：</strong></h2>
<p>可以在前面已经实现的渲染中将“线”的形式改变为不同的形状，调用形状渲染函数，</p>
<p>并且添加一些比较随机的位移旋转函数获得效果格外不同的动图：</p>
<p>动态花朵渲染：<br />
<img src="/images/a1/flower.gif" alt="" /><br />
<img src="/images/a1/flower1.gif" alt="" /><br />
这个的特殊性在于花朵是会旋转着出现的，而且它的盛开会有一定的延迟性。</p>
<p>（花朵因为有延迟所以渲染的位置必须是一个定值，所以这个形状拿去渲染动图变换的点往往会出乱子，但是有时候又会有出人意料的效果。）</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 渲染风格1——花朵形状渲染</span></span><br><span class="line"><span class="comment">//x,y:点的坐标</span></span><br><span class="line"><span class="comment">//flowerDelay:花开时间（从无到有）</span></span><br><span class="line">    <span class="comment">//flowerBright:花的亮度</span></span><br><span class="line"><span class="comment">//flowerColor:花的颜色</span></span><br><span class="line"><span class="comment">//flowerWidth:花瓣宽度</span></span><br><span class="line"><span class="comment">//flowerHeight:花瓣长度</span></span><br><span class="line"><span class="comment">//flowerScale:花瓣当前大小</span></span><br><span class="line"><span class="comment">//flowerScaleT:花瓣最终大小</span></span><br><span class="line"></span><br><span class="line">	<span class="title function_">translate</span>(x,y);</span><br><span class="line">	<span class="keyword">if</span> (flowerDelay.<span class="property">val</span> &lt; <span class="number">0</span>) &#123;</span><br><span class="line">		<span class="title function_">push</span>();</span><br><span class="line">		flowerScale.<span class="property">val</span> += (flowerScaleT - flowerScale.<span class="property">val</span>) *<span class="number">0.03</span>;</span><br><span class="line">		<span class="title function_">scale</span>(flowerScale.<span class="property">val</span>);</span><br><span class="line">		<span class="title function_">rotate</span>(flowerScale.<span class="property">val</span>*<span class="number">3</span>);</span><br><span class="line">		<span class="title function_">noStroke</span>();</span><br><span class="line">		<span class="title function_">fill</span>(<span class="title function_">hue</span>(flowerColor), <span class="title function_">saturation</span>(flowerColor),           flowerBright);</span><br><span class="line">		<span class="title function_">ellipse</span>(<span class="number">0</span>, <span class="number">0</span>, flowerWidth, flowerHeight);</span><br><span class="line">		<span class="title function_">rotate</span>(<span class="number">180</span>);</span><br><span class="line">		<span class="title function_">ellipse</span>(<span class="number">0</span>, <span class="number">0</span>, flowerWidth, flowerHeight);</span><br><span class="line">		<span class="title function_">rotate</span>(<span class="number">180</span>);</span><br><span class="line">		<span class="title function_">ellipse</span>(<span class="number">0</span>, <span class="number">0</span>, flowerWidth, flowerHeight);</span><br><span class="line">		<span class="title function_">fill</span>(<span class="string">&#x27;white&#x27;</span>);</span><br><span class="line">		<span class="title function_">ellipse</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">5</span>, <span class="number">5</span>);</span><br><span class="line">		<span class="title function_">pop</span>();</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		flowerDelay.<span class="property">val</span>--;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="title function_">translate</span>(-x,-y); <span class="comment">//变回去不然有偏移</span></span><br></pre></td></tr></table></figure>
<hr />
<h2 id="2转轮形状"><a class="markdownIt-Anchor" href="#2转轮形状"></a> <strong>2.转轮形状：</strong></h2>
<p>单个转轮实现：<br />
<img src="/images/a1/wheel.gif" alt="" /><br />
<strong>实现部分核心代码</strong>：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//渲染风格——转轮形状渲染</span></span><br><span class="line"><span class="comment">//x,y:点的坐标</span></span><br><span class="line"><span class="comment">//midR:中心半径</span></span><br><span class="line"><span class="comment">//framecount:帧数</span></span><br><span class="line"><span class="comment">//rotatecount:旋转度数</span></span><br><span class="line"><span class="comment">//mouseX:鼠标横坐标</span></span><br><span class="line">	<span class="title function_">push</span>();</span><br><span class="line">	<span class="title function_">translate</span>(x,y);</span><br><span class="line">	<span class="title function_">stroke</span>(<span class="number">255</span>,<span class="number">30</span>);</span><br><span class="line">	<span class="title function_">strokeWeight</span>(<span class="number">10</span>);</span><br><span class="line">	<span class="title function_">noFill</span>();</span><br><span class="line">	<span class="title function_">ellipse</span>(<span class="number">0</span>,<span class="number">0</span>,midR*<span class="number">2</span>);</span><br><span class="line">	<span class="title function_">strokeWeight</span>(<span class="number">2</span>);</span><br><span class="line">	<span class="title function_">ellipse</span>(<span class="number">0</span>,<span class="number">0</span>,midR*<span class="number">2</span>*<span class="number">0.9</span>);</span><br><span class="line">  <span class="title function_">rotate</span>(<span class="title function_">noise</span>(frameCount/<span class="number">150</span> )*<span class="number">2</span> + mouseX/<span class="number">50</span>)</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;rotateCount;i+=<span class="number">1</span>)&#123;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">rotate</span>(i*<span class="variable constant_">PI</span>*<span class="number">2</span>/rotateCount)</span><br><span class="line">  <span class="title function_">stroke</span>(<span class="number">255</span>,<span class="number">30</span>)</span><br><span class="line">  <span class="title function_">strokeWeight</span>(<span class="number">2</span>)</span><br><span class="line">  <span class="title function_">line</span>(<span class="number">50</span>,<span class="number">0</span>,midR*<span class="number">0.9</span>,<span class="number">0</span>)</span><br><span class="line">  <span class="title function_">push</span>()</span><br><span class="line">  <span class="title function_">strokeWeight</span>(( i%<span class="number">5</span>==<span class="number">0</span>?<span class="number">5</span>:<span class="number">1</span>))</span><br><span class="line">  <span class="title function_">stroke</span>(<span class="number">255</span>)</span><br><span class="line">  <span class="title function_">rotate</span>(<span class="title function_">cos</span>(-frameCount/<span class="number">80</span>)*<span class="number">2</span>)</span><br><span class="line">  <span class="title function_">line</span>(midR+<span class="number">30</span>,<span class="number">0</span>,midR*<span class="number">1.2</span> +( i%<span class="number">5</span>==<span class="number">0</span>?<span class="number">10</span>:-<span class="number">5</span>),<span class="number">0</span>)</span><br><span class="line">  <span class="title function_">pop</span>()</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">pop</span>();</span><br></pre></td></tr></table></figure>
<p><strong>转轮形状渲染，配合sin数组生成为坐标位置得到的效果：</strong><br />
<img src="/images/a1/wheel1.gif" alt="" /><br />
<strong>转轮形状渲染，配合粒子流数组生成为坐标位置得到的效果：</strong></p>
<p>我太喜欢这个效果了↓↓↓，黑白唯美，转轮看起来像是昙花（或是白菊），意境也够，有相对比较少量的交互——鼠标横坐标x能提高转速。<br />
<img src="/images/a1/wheel3.gif" alt="" /></p>
<hr />
<h2 id="-5"><a class="markdownIt-Anchor" href="#-5"></a> </h2>
<h2 id="3针对点的色彩渲染形状"><a class="markdownIt-Anchor" href="#3针对点的色彩渲染形状"></a> 3.针对点的色彩渲染形状：</h2>
<p><img src="/images/a1/mount1.gif" alt="" /></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 渲染风格——针对点的色彩渲染</span></span><br><span class="line"><span class="comment">//points:点的坐标</span></span><br><span class="line"><span class="comment">//minDiam, maxDiam:该点的最大最小半径，在这之间取随机</span></span><br><span class="line"><span class="comment">//minAlpha, maxAlpha:控制颜色透明度</span></span><br><span class="line"><span class="comment">//r,g,b：控制颜色透明度，三个值取越大颜色变化越小</span></span><br><span class="line"><span class="comment">//n：随机粒子偏移量</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> rdn0 = <span class="title function_">random</span>(<span class="number">255</span>);</span><br><span class="line"><span class="keyword">var</span> rdn1 = <span class="title function_">random</span>(<span class="number">255</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> h = r+(<span class="title function_">round</span>(<span class="title function_">random</span>(<span class="number">255</span>-r)));</span><br><span class="line">    <span class="keyword">var</span> s = g+(<span class="title function_">round</span>(<span class="title function_">random</span>(<span class="number">255</span>-g)));</span><br><span class="line">    <span class="keyword">var</span> b = b+(<span class="title function_">round</span>(<span class="title function_">random</span>(<span class="number">255</span>-b)));</span><br><span class="line">    <span class="keyword">var</span> a = <span class="title function_">random</span>(minAlpha, maxAlpha);</span><br><span class="line"></span><br><span class="line">    <span class="title function_">fill</span>([h, s, b], a);</span><br><span class="line">    <span class="keyword">var</span> diam = <span class="title function_">random</span>(minDiam, maxDiam);</span><br><span class="line">    <span class="keyword">var</span> jitterX = <span class="title function_">random</span>(-n, n);</span><br><span class="line">    <span class="keyword">var</span> jitterY = <span class="title function_">random</span>(-n, n);</span><br><span class="line"><span class="title function_">stroke</span>([h, s, b], a);</span><br><span class="line">    <span class="title function_">ellipse</span>(points[<span class="number">0</span>] + jitterX, points[<span class="number">1</span>] + jitterY, diam, diam,[h,s,   b]);</span><br><span class="line"><span class="title function_">stroke</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>);</span><br></pre></td></tr></table></figure>
<h2 id="4色块晕染形状"><a class="markdownIt-Anchor" href="#4色块晕染形状"></a> <strong>4.色块晕染形状：</strong></h2>
<p>以上已经试着做了不少特定图形形状，但还是没有办法实现比较惊艳的色彩晕染。</p>
<p>我观察一些比较惊艳的效果，对他们的代码进行了研究，发现他们中许多实现都运用到了着色器shader↓。</p>
<p><a target="_blank" rel="noopener" href="https://itp-xstory.github.io/p5js-shaders/#/./docs/how-to-write-a-shader">Introduction to p5.js shaders (itp-xstory.github.io)</a></p>
<p>在学习计算机图形学时，我跟着youtube教程对着色器语言GLSL已经略有了解，现在试着临摹制作openprocessing中看到的色块晕染效果，并试着把它封装，运用到我自己的库中。</p>
<p><em>noise也是生成程序纹理常用的基本工具之一。我查了一些资料，了解到色块的晕染效果是通过多级单纯形分形噪声叠加渲染而成的。</em></p>
<p><em>它的第一步是调用eclipse画一个圆，剩下的工作就都交给着色器了。</em></p>
<p><strong>单纯形分形噪声</strong></p>
<p>在某些应用中，单纯形噪声过于平滑，无法产生“真实”的效果。观察上面的图像，你可能会注意到它们很“模糊”。在某些情况下，更多的随机性是可取的。这就是单纯形分形噪声有用的地方。单纯形分形噪声将不同频率的多个单纯形噪声函数叠加在一起，以产生更“嘈杂”的结果。<br />
<img src="/images/a1/image1.gif" alt="" /><br />
可以看出，octaves达到3时，图片已经越来越嘈杂了，也逐渐接近色块晕染的效果。</p>
<p>参考下列噪声算法完成我们的工作：</p>
<p>GLSL噪声算法的收集：<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_28299311/article/details/103654190">(34条消息) GLSL - 噪声算法的收集_长生但酒狂的博客-CSDN博客</a></p>
<p>在着色器语言GLSL中：</p>
<p>attribute表示当顶点着色器在每个顶点运行时它修饰的变量每次都不一样。</p>
<p>uniform表示当顶点着色器在每个顶点运行时它修饰的变量每次都一样。</p>
<p>varying表示当顶点着色器在每个顶点运行时它修饰的变量的值最终都需要传递给片段着色器。因为三个顶点可以定义一个三角形，而很多像素才能装配一个三角形，所以varying修饰的变量的值将经过插值后分配给片段着色器。</p>
<p><strong>实现部分核心代码：</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 渲染风格5——针对晕染色块的渲染(运用到着色器GLSL语言)</span></span><br><span class="line"><span class="comment">//sh:着色器</span></span><br><span class="line"><span class="comment">//framecount:帧数（直接传递即可）</span></span><br><span class="line"><span class="comment">//color：晕染色块颜色</span></span><br><span class="line"><span class="comment">//x:晕染色块横坐标</span></span><br><span class="line"><span class="comment">//y:晕染色块纵坐标</span></span><br><span class="line"><span class="comment">//size：晕染色块大小</span></span><br><span class="line"><span class="comment">//v：多点晕染速度</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//着色器</span></span><br><span class="line">sh.<span class="title function_">setUniform</span>(<span class="string">&quot;u_time&quot;</span>, <span class="title function_">millis</span>());</span><br><span class="line"><span class="keyword">if</span>(frameCount%(<span class="number">100</span>/v) == <span class="number">0</span>)&#123;</span><br><span class="line"><span class="title function_">resetShader</span>();</span><br><span class="line"><span class="title function_">ellipseMode</span>(<span class="variable constant_">CENTER</span>);</span><br><span class="line"><span class="title function_">fill</span>(color);</span><br><span class="line"><span class="title function_">ellipse</span>(x,y,size,size,<span class="number">20</span>);</span><br><span class="line"><span class="variable language_">this</span>.<span class="title function_">shader</span>(sh);</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">rect</span>(-width/<span class="number">2</span>,-height/<span class="number">2</span>,width,height);</span><br></pre></td></tr></table></figure>
<p><strong>单黑色色块渲染效果：</strong><br />
<strong>随机色在画布上随机点渲染：</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">   <span class="keyword">let</span> size = <span class="title function_">min</span>(width,height) * <span class="title function_">random</span>(<span class="number">0.3</span>,<span class="number">0.5</span>);</span><br><span class="line">   <span class="keyword">let</span> mycolor = <span class="title function_">color</span>(<span class="number">240</span>, <span class="title function_">random</span>(<span class="number">180</span>, <span class="number">220</span>), <span class="title function_">random</span>(<span class="number">180</span>, <span class="number">240</span>));</span><br><span class="line">   <span class="keyword">let</span> x=<span class="title function_">random</span>(-width/<span class="number">2</span>,width/<span class="number">2</span>);</span><br><span class="line">   <span class="keyword">let</span> y=<span class="title function_">random</span>(-height/<span class="number">2</span>,height/<span class="number">2</span>);</span><br><span class="line">   <span class="keyword">let</span> v=<span class="number">2</span>;</span><br><span class="line">   <span class="title function_">renderTrace_colorBlock</span>(myShader,frameCount,mycolor,x,y,size,v)</span><br></pre></td></tr></table></figure>
<hr />
<h1 id="三想说的话"><a class="markdownIt-Anchor" href="#三想说的话"></a> 三.想说的话</h1>
<hr />
<p>→→→</p>
<p>需要注意的一点是，由于转轮效果和旋转着盛开的❀的效果由要注意。于本身就具有一定的动态。把它们添加一些代码里面去时可能会出现一些问题：比如说页面卡顿（因为添加的转轮太多），比如说旋转的花朵显示不出来（这可能是因为每一帧都在刷新，还没来得及盛开就被刷新过去了）…所以使用时要注意一点。</p>
<hr />
<p>→→→</p>
<p>上面的效果里只有色块渲染是要创建webGL模式的画布的！需要特别注意，模式弄错了对效果的影响很大。</p>
<hr />
<p>→→→</p>
<p>A1是由单张单张图片组成的，代码总体而言可能会有些混乱，因为我把我试过的效果都放在了备注里面，这样就可以mark住不错的效果，可以试试取消备注看效果。</p>
<p>渲染函数有一部分在lineAryLib_0215.js的particle类的update函数里和layer类的display函数里面，分形树效果也可以进行调整，就在renderTrace_trees里面。</p>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/JS/" rel="tag"># JS</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
            </div>
            <div class="post-nav-item">
                <a href="/2023/06/10/A3-A4%20%20%E6%8A%80%E6%9C%AF%E5%AE%9E%E7%8E%B0%E6%96%87%E6%A1%A3/" rel="next" title="A3-A4 技术实现文档">
                  A3-A4 技术实现文档 <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">vv-carrot</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.4/jquery.min.js" integrity="sha256-oP6HI9z1XaZNBrJURtCoUT5SUnxFr8s3BzRl+cbzUq8=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  
  <script class="next-config" data-name="pdf" type="application/json">{"object_url":{"url":"https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.2.8/pdfobject.min.js","integrity":"sha256-tu9j5pBilBQrWSDePOOajCUdz6hWsid/lBNzK4KgEPM="},"url":"/lib/pdf/web/viewer.html"}</script>
  <script src="/js/third-party/tags/pdf.js"></script>

  <script class="next-config" data-name="mermaid" type="application/json">{"enable":true,"theme":{"light":"forest","dark":"dark"},"js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mermaid/9.4.3/mermaid.min.js","integrity":"sha256-e0o3JYsdjqKajf9eOe22FhioYSz9WofRY4dLKo3F6do="}}</script>
  <script src="/js/third-party/tags/mermaid.js"></script>

  <script src="/js/third-party/fancybox.js"></script>



  




  

  <script class="next-config" data-name="enableMath" type="application/json">false</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"none","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script>
<script src="/js/third-party/math/mathjax.js"></script>



</body>
</html>
